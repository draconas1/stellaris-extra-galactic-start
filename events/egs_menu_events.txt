namespace = egs_menu

#main menu
country_event = {
	id = egs_menu.1    
	title = "egs_menu.1.name"

	desc = {
		trigger = {
			NOT = { has_global_flag = retile_active }
		}
		text = egs_menu.1.desc
	}
	desc = {
		trigger = {
			has_global_flag = retile_active
		}
		text = egs_menu.1.desc.retile
	}

	picture = GFX_evt_ancient_databank
	is_triggered_only = yes

	trigger = {
		is_ai = no
		has_civic = civic_egs
	}

	option = {
		name = "egs_menu.1.option.cluster"
		hidden_effect = {
			country_event = { id = egs_menu.100 }
		}
	}

	option = {
		name = "egs_menu.1.option.system"
		hidden_effect = {
			country_event = { id = egs_menu.200 }
		}
	}

	option = {
		name = "egs_menu.1.option.kerbal"
		hidden_effect = {
			country_event = { id = egs_menu.300 }
		}
	}

	option = {
		name = "egs_menu.1.option.giga"
		hidden_effect = {
			country_event = { id = egs_menu.400 }
		}
	}

	option = {
		name = "egs_menu.1.option.link"
		hidden_effect = {
			country_event = { id = egs_menu.500 }
		}
	}

	option = {
		name = "egs_menu.1.option.sr"
		hidden_effect = {
			country_event = { id = egs_menu.600 }
		}
	}

	option = {
		name = "egs_menu.1.option.begin"
	}
}

# set initalisation variables
country_event = {
	id = egs_menu.2    
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_ai = no
		has_civic = civic_egs
	}

	immediate = {
		set_country_flag = EGS_START_RANDOM
		set_country_flag = EGS_CLUSTER_APPRENTICE
		set_country_flag = EGS_KERBAL_NO
		set_country_flag = EGS_GIGA_NO
		set_country_flag = EGS_LINK_WORMHOLE
		set_country_flag = EGS_SR_NO
		# make sure we don't spawn extrgalatic cluster by accident
		set_global_flag = extragalactic_cluster_spawned
		country_event = { id = egs_menu.1  }
	}
}

# Trigger the galaxy spawn: Vanilla
country_event = {
	id = egs_menu.3    
	hide_window = yes
	fire_only_once = yes
	mean_time_to_happen = { days = 2 }

	trigger = {
		is_ai = no
		has_civic = civic_egs
		NOT = { has_global_flag = retile_active }
	}
	immediate = {
		country_event = {
			id = egs_menu.5
		}
	}
}


# Trigger the galaxy spawn: Stellaris Immortal
country_event = {
	id = egs_menu.4
	hide_window = yes
	fire_only_once = yes
	mean_time_to_happen = { days = 10 }

	trigger = {
		is_ai = no
		has_civic = civic_egs
		has_global_flag = retile_active
	}
	immediate = {
		country_event = {
			id = egs_menu.5
		}
	}
}



# Kickoff the event
country_event = {
	id = egs_menu.5    
	hide_window = yes
	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		is_ai = no
		has_civic = civic_egs
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = { has_country_flag = EGS_CLUSTER_APPRENTICE }				
				country_event = { id = egs_apprentice.1 }
			}
			else_if = {
				limit = { has_country_flag = EGS_CLUSTER_STEED }				
				country_event = { id = egs_steed.1 }
			}
			else_if = {
				limit = { has_country_flag = EGS_CLUSTER_ATRONACH }				
				country_event = { id = egs_atronach.1 }
			}
			else_if = {
				limit = { has_country_flag = EGS_CLUSTER_BIG_DIPPER }				
				country_event = { id = egs_bg_dipper.1 }
			}
			else = {
				country_event = { id = egs_hexagon.1 }
			}
		}
	}
}



#Cluster Menu
country_event = {
	id = egs_menu.100    
	title = "egs_menu.100.name"
	desc = "egs_menu.100.desc"
	picture = GFX_evt_clocks
	is_triggered_only = yes

	option = {
		name = "egs_menu.100.option.apprentice"
		trigger = {
			NOT = { has_country_flag = EGS_CLUSTER_APPRENTICE }
		}
		hidden_effect = {
			clear_egs_cluster_flags = yes
			set_country_flag = EGS_CLUSTER_APPRENTICE
			country_event = { id = egs_menu.1 }
		}
	}
	option = {
		name = "egs_menu.100.option.apprentice.on"
		trigger = {
			has_country_flag = EGS_CLUSTER_APPRENTICE
		}
		hidden_effect = {
			clear_egs_cluster_flags = yes
			set_country_flag = EGS_CLUSTER_APPRENTICE
			country_event = { id = egs_menu.1 }
		}
	}
	
	option = {
		name = "egs_menu.100.option.hexagon"
		trigger = {
			NOT = { has_country_flag = EGS_CLUSTER_HEXAGON }
		}
		hidden_effect = {
			clear_egs_cluster_flags = yes
			set_country_flag = EGS_CLUSTER_HEXAGON
			country_event = { id = egs_menu.1 }
		}
	}
	option = {
		name = "egs_menu.100.option.hexagon.on"
		trigger = {
			has_country_flag = EGS_CLUSTER_HEXAGON
		}
		hidden_effect = {
			clear_egs_cluster_flags = yes
			set_country_flag = EGS_CLUSTER_HEXAGON
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.100.option.steed"
		trigger = {
			NOT = { has_country_flag = EGS_CLUSTER_STEED }
		}
		hidden_effect = {
			clear_egs_cluster_flags = yes
			set_country_flag = EGS_CLUSTER_STEED
			country_event = { id = egs_menu.1 }
		}
	}
	option = {
		name = "egs_menu.100.option.steed.on"
		trigger = {
			has_country_flag = EGS_CLUSTER_STEED
		}
		hidden_effect = {
			clear_egs_cluster_flags = yes
			set_country_flag = EGS_CLUSTER_STEED
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.100.option.atronach"
		trigger = {
			NOT = { has_country_flag = EGS_CLUSTER_ATRONACH }
		}
		hidden_effect = {
			clear_egs_cluster_flags = yes
			set_country_flag = EGS_CLUSTER_ATRONACH
			country_event = { id = egs_menu.1 }
		}
	}
	option = {
		name = "egs_menu.100.option.atronach.on"
		trigger = {
			has_country_flag = EGS_CLUSTER_ATRONACH
		}
		hidden_effect = {
			clear_egs_cluster_flags = yes
			set_country_flag = EGS_CLUSTER_ATRONACH
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.100.option.bigdipper"
		trigger = {
			NOT = { has_country_flag = EGS_CLUSTER_BIG_DIPPER }
		}
		hidden_effect = {
			clear_egs_cluster_flags = yes
			set_country_flag = EGS_CLUSTER_BIG_DIPPER
			country_event = { id = egs_menu.1 }
		}
	}
	option = {
		name = "egs_menu.100.option.bigdipper.on"
		trigger = {
			has_country_flag = EGS_CLUSTER_BIG_DIPPER
		}
		hidden_effect = {
			clear_egs_cluster_flags = yes
			set_country_flag = EGS_CLUSTER_BIG_DIPPER
			country_event = { id = egs_menu.1 }
		}
	}
}



#Home System Menu
country_event = {
	id = egs_menu.200    
	title = "egs_menu.200.name"
	desc = "egs_menu.200.desc"
	picture = GFX_evt_colony_settlement
	is_triggered_only = yes

	option = {
		name = "egs_menu.200.option.sol"
		trigger = {
			NOT = { has_country_flag = EGS_START_SOL }
		}
		hidden_effect = {
			clear_egs_start_system_flags = yes
			set_country_flag = EGS_START_SOL
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.200.option.sol.on"
		trigger = {
			has_country_flag = EGS_START_SOL
		}
		hidden_effect = {
			clear_egs_start_system_flags = yes
			set_country_flag = EGS_START_SOL
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.200.option.deneb"
		trigger = {
			NOT = { has_country_flag = EGS_START_DENEB }
		}
		hidden_effect = {
			clear_egs_start_system_flags = yes
			set_country_flag = EGS_START_DENEB
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.200.option.deneb.on"
		trigger = {
			has_country_flag = EGS_START_DENEB
		}
		hidden_effect = {
			clear_egs_start_system_flags = yes
			set_country_flag = EGS_START_DENEB
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.200.option.random"
		trigger = {
			NOT = { has_country_flag = EGS_START_RANDOM }
		}
		hidden_effect = {
			clear_egs_start_system_flags = yes
			set_country_flag = EGS_START_RANDOM
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.200.option.random.on"
		trigger = {
			has_country_flag = EGS_START_RANDOM
		}
		hidden_effect = {
			clear_egs_start_system_flags = yes
			set_country_flag = EGS_START_RANDOM
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.200.option.randombinry"
		trigger = {
			NOT = { has_country_flag = EGS_START_RANDOM_BINARY }
		}
		hidden_effect = {
			clear_egs_start_system_flags = yes
			set_country_flag = EGS_START_RANDOM_BINARY
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.200.option.randombinry.on"
		trigger = {
			has_country_flag = EGS_START_RANDOM_BINARY
		}
		hidden_effect = {
			clear_egs_start_system_flags = yes
			set_country_flag = EGS_START_RANDOM_BINARY
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.200.option.randomtrinary"
		trigger = {
			NOT = { has_country_flag = EGS_START_RANDOM_TRINARY }
		}
		hidden_effect = {
			clear_egs_start_system_flags = yes
			set_country_flag = EGS_START_RANDOM_TRINARY
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.200.option.randomtrinary.on"
		trigger = {
			has_country_flag = EGS_START_RANDOM_TRINARY
		}
		hidden_effect = {
			clear_egs_start_system_flags = yes
			set_country_flag = EGS_START_RANDOM_TRINARY
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.200.option.ringworld"
		trigger = {
			NOT = { has_country_flag = EGS_START_RINGWORLD }
		}
		hidden_effect = {
			clear_egs_start_system_flags = yes
			set_country_flag = EGS_START_RINGWORLD
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.200.option.ringworld.on"
		trigger = {
			has_country_flag = EGS_START_RINGWORLD
		}
		hidden_effect = {
			clear_egs_start_system_flags = yes
			set_country_flag = EGS_START_RINGWORLD
			country_event = { id = egs_menu.1 }
		}
	}	
}


#Kerbal Menu
country_event = {
	id = egs_menu.300    
	title = "egs_menu.300.name"
	desc = "egs_menu.300.desc"
	picture = GFX_evt_alien_segregation
	is_triggered_only = yes

	option = {
		name = "egs_menu.300.option.no"
		trigger = {
			NOT = { has_country_flag = EGS_KERBAL_NO }
		}
		hidden_effect = {
			clear_egs_kerbal_flags = yes
			set_country_flag = EGS_KERBAL_NO
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.300.option.no.on"
		trigger = {
			has_country_flag = EGS_KERBAL_NO
		}
		hidden_effect = {
			clear_egs_kerbal_flags = yes
			set_country_flag = EGS_KERBAL_NO
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.300.option.yes"
		trigger = {
			NOT = { has_country_flag = EGS_KERBAL_YES }
		}
		hidden_effect = {
			clear_egs_kerbal_flags = yes
			set_country_flag = EGS_KERBAL_YES
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.300.option.yes.on"
		trigger = {
			has_country_flag = EGS_KERBAL_YES
		}
		hidden_effect = {
			clear_egs_kerbal_flags = yes
			set_country_flag = EGS_KERBAL_YES
			country_event = { id = egs_menu.1 }
		}
	}
}

#Gigastructures Menu
country_event = {
	id = egs_menu.400    
	title = "egs_menu.400.name"
	desc = "egs_menu.400.desc"
	picture = GFX_evt_think_tank
	is_triggered_only = yes

	option = {
		name = "egs_menu.400.option.no"
		trigger = {
			NOT = { has_country_flag = EGS_GIGA_NO }
		}
		hidden_effect = {
			clear_egs_gigastructure_flags = yes
			set_country_flag = EGS_GIGA_NO
			country_event = { id = egs_menu.1 }
		}
	}
	option = {
		name = "egs_menu.400.option.no.on"
		trigger = {
			has_country_flag = EGS_GIGA_NO
		}
		hidden_effect = {
			clear_egs_gigastructure_flags = yes
			set_country_flag = EGS_GIGA_NO
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.400.option.yes"
		trigger = {
			NOT = { has_country_flag = EGS_GIGA_YES }
		}
		hidden_effect = {
			clear_egs_gigastructure_flags = yes
			set_country_flag = EGS_GIGA_YES
			country_event = { id = egs_menu.1 }
		}
	}
	option = {
		name = "egs_menu.400.option.yes.on"
		trigger = {
			has_country_flag = EGS_GIGA_YES
		}
		hidden_effect = {
			clear_egs_gigastructure_flags = yes
			set_country_flag = EGS_GIGA_YES
			country_event = { id = egs_menu.1 }
		}
	}
}

#Cluster linking Menu
country_event = {
	id = egs_menu.500    
	title = "egs_menu.500.name"
	desc = "egs_menu.500.desc"
	picture = GFX_evt_federation_fleet
	is_triggered_only = yes

	option = {
		name = "egs_menu.500.option.wormhole"
		trigger = {
			NOT = { has_country_flag = EGS_LINK_WORMHOLE }
		}
		hidden_effect = {
			clear_egs_clusterlink_flags = yes
			set_country_flag = EGS_LINK_WORMHOLE
			country_event = { id = egs_menu.1 }
		}
	}
	option = {
		name = "egs_menu.500.option.wormhole.on"
		trigger = {
			has_country_flag = EGS_LINK_WORMHOLE
		}
		hidden_effect = {
			clear_egs_clusterlink_flags = yes
			set_country_flag = EGS_LINK_WORMHOLE
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.500.option.manywormhole"
		trigger = {
			NOT = { has_country_flag = EGS_LINK_MANY_WORMHOLE }
		}
		hidden_effect = {
			clear_egs_clusterlink_flags = yes
			set_country_flag = EGS_LINK_MANY_WORMHOLE
			country_event = { id = egs_menu.1 }
		}
	}
	option = {
		name = "egs_menu.500.option.manywormhole.on"
		trigger = {
			has_country_flag = EGS_LINK_MANY_WORMHOLE
		}
		hidden_effect = {
			clear_egs_clusterlink_flags = yes
			set_country_flag = EGS_LINK_MANY_WORMHOLE
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.500.option.lgate"
		trigger = {
			has_distar = yes
			NOT = { has_country_flag = EGS_LINK_L_GATE }
		}
		hidden_effect = {
			clear_egs_clusterlink_flags = yes
			set_country_flag = EGS_LINK_L_GATE
			country_event = { id = egs_menu.1 }
		}
	}
	option = {
		name = "egs_menu.500.option.lgate.on"
		trigger = {
			has_distar = yes
			has_country_flag = EGS_LINK_L_GATE
		}
		hidden_effect = {
			clear_egs_clusterlink_flags = yes
			set_country_flag = EGS_LINK_L_GATE
			country_event = { id = egs_menu.1 }
		}
	}
}

#Resource Menu
country_event = {
	id = egs_menu.600    
	title = "egs_menu.600.name"
	desc = "egs_menu.600.desc"
	picture = GFX_evt_strategic_resources
	is_triggered_only = yes

	option = {
		name = "egs_menu.600.option.no"
		trigger = {
			NOT = { has_country_flag = EGS_SR_NO }
		}
		hidden_effect = {
			clear_egs_kerbal_flags = yes
			set_country_flag = EGS_SR_NO
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.600.option.no.on"
		trigger = {
			has_country_flag = EGS_SR_NO
		}
		hidden_effect = {
			clear_egs_kerbal_flags = yes
			set_country_flag = EGS_SR_NO
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.600.option.yes"
		trigger = {
			NOT = { has_country_flag = EGS_SR_YES }
		}
		hidden_effect = {
			clear_egs_kerbal_flags = yes
			set_country_flag = EGS_SR_YES
			country_event = { id = egs_menu.1 }
		}
	}

	option = {
		name = "egs_menu.600.option.yes.on"
		trigger = {
			has_country_flag = EGS_SR_YES
		}
		hidden_effect = {
			clear_egs_kerbal_flags = yes
			set_country_flag = EGS_SR_YES
			country_event = { id = egs_menu.1 }
		}
	}
}
